## 权限管理

### 一、权限的基本介绍

输入 `ls -l` 指令，显示如下内容

`-rw-r--r--. 1 root root          38 4月  25 20:18 hello.txt`

0 - 9 位说明：

- > 第 0 位确定文件类型（d，-，l，c，b）

  - > \- 是普通文件
  - > l 是链接，相当于 windows 的快捷方式
  - > d 是目录，相当于 windows 的文件夹
  - > c 是字符设备文件，比如键盘、鼠标
  - > b 是块设备，比如硬盘
- > 第 1 - 3 位确定所有者（该文件的所有者）拥有的该文件的权限 ------User
- > 第 4 - 6 位确定所属组（同用户组）的用户拥有的该文件的权限 ------Group
- > 第 7 - 9 位确定其它组的用户拥有的该文件的权限 ------Other 



### 二、rwx 权限详解【难点】

#### 2.1 rwx 作用到文件

> [r] 代表可读（read）：可以读取，查看

> [w] 代表可写（write）：可以修改，但是不代表可以删除该文件。删除一个文件的前提是对该文件所在的目录有写权限

> [x] 代表可执行（execute）：可以被执行

==文件的 rwx 权限和其所在目录的 rwx 权限没有关系，但是如果要对目录内的文件进行操作，需要有对该目录的相应权限 x==



#### 2.2 rwx 作用到目录

> [r] 代表可读（read）：可以读取，`ls` 查看目录内容

> [w] 代表可写（write）：可以修改，对目录内的文件和目录进行创建，删除，重命名（不能对该目录命名）

> [x] 代表可执行（execute）：可以进入该目录，`cd`



### 三、文件及目录权限实际案例

`ls -l` 中显示的内容如下：

`-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc`

- 10 个字符确定文件类型及不同用户对文件的权限
  - 第一个字符代表文件类型：- l d c b
  - 其余字符每 3 个一组（rwx）：读（r）写（w） 执行（x）
    - 第一组 rwx：文件所有者的权限是读、写和执行
    - 第二组 rw-：文件所在组的用户的权限是读、写但不能执行
    - 第三组 r--：文件其它组的用户的权限是读但不能写和执行
- 用数字表示为：r = 4, w = 2, x = 1，因此 rwx = 4 + 2 + 1 = 7
- 其他说明
  - 1		    文件：硬连接数 或 目录：子目录数 + 文件数
  - root               所有者
  - root               所在组
  - 1213              文件大小（字节），如果是文件夹，显示 4096 字节
  - Feb 2 09:39  最后修改日期
  - abc                文件名



### 四、修改权限

#### 4.1 基本说明

通过 `chmod` 指令，可以修改文件或者目录的权限

==只有 root 用户和文件的所有者可以更改文件的权限==



#### 4.2 第一种方式：+、 -、 = 变更权限

```bash
# u：所有者 	g：所在组	o：其它组	a：所有人（u，g，o 的总和）

chmod u=rwx,g=rx,o=x 文件/目录

chmod o+w 文件/目录

chmod a-x 文件/目录
```

**案例演示**

```bash
# 给 abc 文件的所有者读写执行的权限，给所在组都执行权限，给其它组读执行权限
chmod u=rwx,g=rx,o=rx abc

# 给 abc 文件的所有者除去执行的权限，增加读写的权限
chmod u-x,g+w abc

# 给 abc 文件的所有用户添加读的权限
chmod a+r abc
```



#### 4.3 第二种方式：通过数字变更权限

```bash
# r=4 w=2 x=1 rwx=4+2+1=7
chmod u=rwx,g=rx 文件目录名
# 相当于
chmod 751 文件目录名
```

**案例演示**

```bash
# 将 /home/abc.txt 文件的权限修改成 rwxr-xr-x，使用数字的方式实现
chmod 755 /home/abc.txt
```



























